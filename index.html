<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Microteaching -- Nahuel Statuto</title>
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@4/dist/reveal.css">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@4/dist/theme/white.css" id="theme">
  <style>
    :root { --accent: #1f6feb; }
    .reveal { font-size: 34px; }
    .reveal .accent { color: var(--accent); }
    .reveal .box { border: 2px solid rgba(31,111,235,0.25); background: rgba(31,111,235,0.06); padding: 14px 18px; border-radius: 14px; }
    /* ... (puedes mantener el resto de tus estilos CSS aquí) ... */
  </style>
</head>
<body>
<div class="reveal">
  <div class="slides">
    <section><h1>k-means <span class="accent">en 10 minutos</span></h1></section>

    <section>
      <h1>k-means <span class="accent">en 10 minutos</span></h1>
      <p class="muted">Aprendizaje no supervisado · Clustering · Visualización 2D</p>
      <div class="box small">
        Objetivo: entender la intuición del algoritmo (asignar ? actualizar) y verlo funcionar.
      </div>
      <aside class="notes">
        Arranque: 1 frase de propósito + gancho (datos sin etiquetas).
        Menciona que habrá participación (brainstorming) y una demo visual.
      </aside>
    </section>

    <section>
      <h2>¿Qué haremos hoy?</h2>
      <ol>
        <li>ML en 60 segundos: <span class="accent">3 familias</span></li>
        <li>Por qué el <span class="accent">no supervisado</span> importa</li>
        <li>Construimos k-means <span class="accent">con el público</span></li>
        <li>Demo 2D paso a paso + aplicación real</li>
      </ol>
      <aside class="notes">
        Mantén el encuadre. Esto reduce ansiedad en público no técnico.
      </aside>
    </section>


  </div>
</div>

<script src="https://unpkg.com/reveal.js@4/dist/reveal.js"></script>
<script src="https://unpkg.com/reveal.js@4/plugin/notes/notes.js"></script>

<script>
  // CONFIGURACIÓN
const MULTIPLEX_URL = "https://multiplex.up.railway.app/";
const MULTIPLEX_ID = "250f42f4b411021cfc47399a0dbf659b1989fe0079d4277a44fedb6268fd8c9b";
const MULTIPLEX_SECRET = "3d7977d36f96fbbac3ffd041f2f56905";

const isMaster = new URLSearchParams(window.location.search).has("master");

async function startReveal() {
  try {
    // 1. Cargamos SOLO socket.io (esencial para la comunicación)
    const s = document.createElement("script");
    s.src = `${MULTIPLEX_URL}socket.io/socket.io.js`;
    document.head.appendChild(s);

    s.onload = () => {
      const socket = io.connect(MULTIPLEX_URL);

      // 2. Inicializamos Reveal
      Reveal.initialize({
        hash: true,
        slideNumber: true,
        plugins: [RevealNotes]
      }).then(() => {
        
        if (isMaster) {
          console.log("Modo MASTER activado");
          // Notificar al servidor cada vez que cambies de slide
          Reveal.on('slidechanged', event => {
            socket.emit('multiplex-statechanged', {
              id: MULTIPLEX_ID,
              secret: MULTIPLEX_SECRET,
              state: Reveal.getState()
            });
          });
        } else {
          console.log("Modo CLIENTE activado");
          // Escuchar cambios del Master
          socket.on(MULTIPLEX_ID, data => {
            if (data.socketId !== socket.id) {
              Reveal.setState(data.state);
            }
          });
        }
      });
    };
  } catch (e) {
    console.error("Fallo en multiplex:", e);
    Reveal.initialize({ hash: true, plugins: [RevealNotes] });
  }
}

startReveal();
</script>
</body>
</html>