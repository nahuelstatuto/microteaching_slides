<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Microteaching -- Nahuel Statuto</title>
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@4/dist/reveal.css">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@4/dist/theme/white.css" id="theme">
  <style>
    :root { --accent: #1f6feb; }
    .reveal { font-size: 34px; }
    .reveal .accent { color: var(--accent); }
    .reveal .box { border: 2px solid rgba(31,111,235,0.25); background: rgba(31,111,235,0.06); padding: 14px 18px; border-radius: 14px; }
    /* ... (puedes mantener el resto de tus estilos CSS aquï¿½) ... */
  </style>
</head>
<body>
<div class="reveal">
  <div class="slides">
    <section><h1>k-means <span class="accent">en 10 minutos</span></h1></section>

    <section>
      <h1>k-means <span class="accent">en 10 minutos</span></h1>
      <p class="muted">Aprendizaje no supervisado ï¿½ Clustering ï¿½ Visualizaciï¿½n 2D</p>
      <div class="box small">
        Objetivo: entender la intuiciï¿½n del algoritmo (asignar ? actualizar) y verlo funcionar.
      </div>
      <aside class="notes">
        Arranque: 1 frase de propï¿½sito + gancho (datos sin etiquetas).
        Menciona que habrï¿½ participaciï¿½n (brainstorming) y una demo visual.
      </aside>
    </section>

    <section>
      <h2>ï¿½Quï¿½ haremos hoy?</h2>
      <ol>
        <li>ML en 60 segundos: <span class="accent">3 familias</span></li>
        <li>Por quï¿½ el <span class="accent">no supervisado</span> importa</li>
        <li>Construimos k-means <span class="accent">con el pï¿½blico</span></li>
        <li>Demo 2D paso a paso + aplicaciï¿½n real</li>
      </ol>
      <aside class="notes">
        Mantï¿½n el encuadre. Esto reduce ansiedad en pï¿½blico no tï¿½cnico.
      </aside>
    </section>


  </div>
</div>

<script src="https://unpkg.com/reveal.js@4/dist/reveal.js"></script>
<script src="https://unpkg.com/reveal.js@4/plugin/notes/notes.js"></script>

<script>const MULTIPLEX_URL = "https://multiplex.up.railway.app/";
const MULTIPLEX_ID = "250f42f4b411021cfc47399a0dbf659b1989fe0079d4277a44fedb6268fd8c9b";
const MULTIPLEX_SECRET = "3d7977d36f96fbbac3ffd041f2f56905";

const isMaster = new URLSearchParams(window.location.search).has("master");

function initMultiplex() {
  const script = document.createElement("script");
  script.src = `${MULTIPLEX_URL}socket.io/socket.io.js`;
  
  script.onload = () => {
    const socket = io.connect(MULTIPLEX_URL);

    Reveal.initialize({
      hash: true,
      slideNumber: true,
      plugins: [ RevealNotes ]
    }).then(() => {
      
      if (isMaster) {
        console.log("ðŸš€ MASTER: Enviando seÃ±ales...");
        
        const sendUpdate = () => {
          const state = Reveal.getState();
          // AÃ±adimos el ID y Secret dentro del mismo objeto
          state.id = MULTIPLEX_ID;
          state.secret = MULTIPLEX_SECRET;
          
          socket.emit('multiplex-statechanged', state);
          // Por si el servidor usa el nombre de evento antiguo:
          socket.emit('multiplex', state); 
        };

        Reveal.on('slidechanged', sendUpdate);
        Reveal.on('fragmentshown', sendUpdate);
        Reveal.on('fragmenthidden', sendUpdate);
      } else {
        console.log("ðŸ“± CLIENTE: Esperando seÃ±ales...");
        
        socket.on(MULTIPLEX_ID, (data) => {
          if (data.socketId !== socket.id) {
            console.log("Sincronizando slide...");
            Reveal.setState(data);
          }
        });
      }
    });
  };
  document.head.appendChild(script);
}

initMultiplex();
</script>
</body>
</html>