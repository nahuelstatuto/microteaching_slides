<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Microteaching -- Nahuel Statuto</title>
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@4/dist/reveal.css">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@4/dist/theme/white.css" id="theme">
  <style>
    :root { --accent: #1f6feb; }
    .reveal { font-size: 34px; }
    .reveal .accent { color: var(--accent); }
    .reveal .box { border: 2px solid rgba(31,111,235,0.25); background: rgba(31,111,235,0.06); padding: 14px 18px; border-radius: 14px; }
    /* ... (puedes mantener el resto de tus estilos CSS aquï¿½) ... */
  </style>
</head>
<body>
<div class="reveal">
  <div class="slides">
    <section><h1>k-means <span class="accent">en 10 minutos</span></h1></section>

    <section>
      <h1>k-means <span class="accent">en 10 minutos</span></h1>
      <p class="muted">Aprendizaje no supervisado ï¿½ Clustering ï¿½ Visualizaciï¿½n 2D</p>
      <div class="box small">
        Objetivo: entender la intuiciï¿½n del algoritmo (asignar ? actualizar) y verlo funcionar.
      </div>
      <aside class="notes">
        Arranque: 1 frase de propï¿½sito + gancho (datos sin etiquetas).
        Menciona que habrï¿½ participaciï¿½n (brainstorming) y una demo visual.
      </aside>
    </section>

    <section>
      <h2>ï¿½Quï¿½ haremos hoy?</h2>
      <ol>
        <li>ML en 60 segundos: <span class="accent">3 familias</span></li>
        <li>Por quï¿½ el <span class="accent">no supervisado</span> importa</li>
        <li>Construimos k-means <span class="accent">con el pï¿½blico</span></li>
        <li>Demo 2D paso a paso + aplicaciï¿½n real</li>
      </ol>
      <aside class="notes">
        Mantï¿½n el encuadre. Esto reduce ansiedad en pï¿½blico no tï¿½cnico.
      </aside>
    </section>


  </div>
</div>

<script src="https://unpkg.com/reveal.js@4/dist/reveal.js"></script>
<script src="https://unpkg.com/reveal.js@4/plugin/notes/notes.js"></script>

<script>
const MULTIPLEX_URL = "https://multiplex.up.railway.app/";
const MULTIPLEX_ID = "041ea22df482701d97be4f0ff1aa18ce1515568b2062b40b5c6d75a7b2c1f738";
const MULTIPLEX_SECRET = "23849397ef91f9269965c2928cc951dc";// NUEVA CONFIGURACIÃ“N (Usa los del enlace de arriba)

const isMaster = new URLSearchParams(window.location.search).has("master");

function initMultiplex() {
  const script = document.createElement("script");
  // Usamos el socket.io oficial del servidor para evitar conflictos
  script.src = "https://multiplex.up.railway.app/socket.io/socket.io.js";
  
  script.onload = () => {
    const socket = io.connect(MULTIPLEX_URL);

    Reveal.initialize({
      hash: true,
      slideNumber: true,
      plugins: [ RevealNotes ]
    }).then(() => {
      
      if (isMaster) {
        console.log("ðŸš€ MASTER: Conectado al nuevo servidor");
        const sendUpdate = () => {
          socket.emit('multiplex-statechanged', {
            id: MULTIPLEX_ID,
            secret: MULTIPLEX_SECRET,
            state: Reveal.getState()
          });
        };
        Reveal.on('slidechanged', sendUpdate);
        Reveal.on('fragmentshown', sendUpdate);
        Reveal.on('fragmenthidden', sendUpdate);
      } else {
        console.log("ðŸ“± CLIENTE: Escuchando canal:", MULTIPLEX_ID);
        // El servidor emite al ID directamente
        socket.on(MULTIPLEX_ID, (data) => {
          console.log("ðŸ“¡ Â¡RECIBIDO! Sincronizando...");
          Reveal.setState(data.state);
        });
      }
    });
  };
  document.head.appendChild(script);
}

initMultiplex();
</script>
</body>
</html>